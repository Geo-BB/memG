<!DOCTYPE html>
<html>
<head>
<style>
  /* Styling for the outer grid */
  .outer-grid {
    display: grid;
    grid-template-columns: repeat(4, 70px);
    grid-template-rows: repeat(4, 70px);
    gap: 5px;
  }
  
  /* Styling for each outer box */
  .outer-box {
    width: 70px;
    height: 70px;
    display: grid;
    background-color: white;
    border: 1px solid black;
    background-size: contain;
    border-radius: 5px;
  }
  
/* Styling for the inner grid */
.inner-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* 2 columns */
  grid-auto-rows: minmax(auto, 1fr); /* Auto-sized rows */
  gap: 1px;
}

/* Styling for the inner boxes with colors */
.inner-box {
  width: 100%;
  height: 100%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  background-size: 100%;
  background-repeat: no-repeat;
  background-position: center center;
}


  .reset{
    margin-top: 20px;
  }
  
  /* Colors for the inner boxes */
  .tape { background-image :url('assets/tape.jpg'); }
  .apple { background-image: url('assets/apple.jpg'); }
  .cycle { background-image: url('assets/cycle.jpg'); }
  .arrow { background-image: url('assets/arrow.jpg'); }
  .book { background-image: url('assets/book.jpg'); }
  .phone { background-image: url('assets/phone.jpg'); }
  .clock { background-image: url('assets/clock.jpg'); }
  .shoe { background-image: url('assets/shoe.jpg'); }
</style>
</head>
<body>
<div class="outer-grid">
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>
    <!-- Outer boxes -->
    <div class="outer-box" onclick="resetBox(this)">
      <div class="inner-grid">
        <!-- Inner boxes with colors -->
        <div id="tape" class="inner-box tape" onclick="changeColor(this)"></div>
        <div id="apple"class="inner-box apple" onclick="changeColor(this)"></div>
        <div id="cycle" class="inner-box cycle" onclick="changeColor(this)"></div>
        <div id="arrow" class="inner-box arrow" onclick="changeColor(this)"></div>
        <div id="book" class="inner-box book" onclick="changeColor(this)"></div>
        <div id="phone" class="inner-box phone" onclick="changeColor(this)"></div>
        <div id="clock" class="inner-box clock" onclick="changeColor(this)"></div>
        <div id="shoe" class="inner-box shoe" onclick="changeColor(this)"></div>
      </div>
    </div>

</div>
<button class="reset" onclick="reset()">Reset</button>

<script>
      const innerBoxSelectionCount = {
        tape: 0,
        apple: 0,
        cycle: 0,
        arrow: 0,
        book: 0,
        phone: 0,
        clock: 0,
        shoe: 0
    };

  function changeColor(box) {
    //prevent from firing parent onclick
    event.stopPropagation();
    
    const innerBoxClass = box.classList[1];
    
    if (innerBoxSelectionCount[innerBoxClass] < 2) {
        innerBoxSelectionCount[innerBoxClass]++;
        const outerBox = box.parentElement.parentElement
        outerBox.style.backgroundImage =  'url("assets/'+box.id+'.jpg")';
        box.parentElement.style.display = 'none';
        outerBox.id = box.id;
    }
    showOrHideInnerBoxes();

  }
  function resetBox(outerBox) {
    // Reset the background color
    outerBox.style.backgroundImage = 'none';
    // Show the inner grid
    outerBox.querySelector('.inner-grid').style.display = 'grid';
    innerBoxSelectionCount[outerBox.id]--;
    outerBox.id = "";
    showOrHideInnerBoxes();



  }
  function reset() {
    // Get all the outer boxes
    const outerBoxes = document.querySelectorAll('.outer-box');
    // Loop through each outer box
    outerBoxes.forEach((outerBox) => {
      // Reset the background color
      outerBox.style.backgroundImage = 'none';
      // Show the inner grid
      outerBox.querySelector('.inner-grid').style.display = 'grid';
    });
    // Reset the inner box selection count
    for (const innerBoxClass in innerBoxSelectionCount) {
      innerBoxSelectionCount[innerBoxClass] = 0;
    }
    document.querySelectorAll('.inner-box').forEach((box) => {
      box.style.display = 'grid';
    });
  }
  function showOrHideInnerBoxes(){
    for (const innerBoxClass in innerBoxSelectionCount) {
    const selectionCount = innerBoxSelectionCount[innerBoxClass];
    
    if (selectionCount >= 2) {
        // Hide inner boxes with the class that has been selected 2 or more times
        document.querySelectorAll('.' + innerBoxClass).forEach((box) => {
        box.style.display = 'none';
        });
    } else {
        // Show inner boxes with the class that has been selected less than 2 times
        document.querySelectorAll('.' + innerBoxClass).forEach((box) => {
        box.style.display = 'grid';
        });
    }
    }
  }
</script>
</body>
</html>
